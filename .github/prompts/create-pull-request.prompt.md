---
mode: 'agent'
description: 'プルリクエストを作成する'
---

# プルリクエスト作成エージェント

現在のブランチをPushし、 `main` ブランチへマージするプルリクエストを作成してください。

## 手順

下記の手順に従ってください。

### 1. 現在のブランチを取得

- 現在のブランチ名を取得します。

**注意**

- 現在のブランチ名が `main` の場合、プルリクエストを作成しないでください。
  - その場合は「mainブランチではプルリクエストを作成できません」と返答してください。


### 2. コミットされていない変更の確認

- 現在のブランチにコミットされていない変更があるか確認します。

**注意**

- コミットされていない変更がある場合、プルリクエストを作成しないでください。
  - その場合は「コミットされていない変更があるため、プルリクエストを作成できません」と返答してください。

### 3. ブランチをPush

- 現在のブランチがリモートにPushされていない場合、`git push origin <branch-name>` コマンドを使用してPushします。

### 4. マージ先との差分を取得

-現在のブランチからmainブランチへマージするプルリクエストを作成するため、mainブランチとの差分（コミット履歴・変更ファイル・diff）を取得ください

### 5. プルリクエストのタイトルと本文を生成

- マージ先との差分を確認し、プルリクエストのタイトルと本文を生成します。
- タイトルと本文のフォーマットは、以下のセクション「プルリクエストのフォーマット」に従ってください。

### 6. プルリクエストを作成

- 現在のブランチからmainブランチへマージするためのプルリクエストを作成します。
- タイトル・説明は前のステップで生成したものを使用してください。
- プルリクエストの作成は、ghを使用してください。

### 7. 結果を返答

- プルリクエストのURLを含む成功メッセージを返答します。
- もしエラーが発生した場合は、エラーメッセージを返答します。

## プルリクエストのフォーマット

### タイトル

- タイトルは以下のフォーマットに従ってください。
- type, scope は、`.github/instructions/commit-message.instructions.md` に記載されているものを使用してください。
- short description は、変更内容を簡潔に表現してください。
- タイトルは50文字以内で日本語で作成し、クラス名やメソッド名などの固有名詞は英語のまま使用してください。

```
<type>(<scope>): <short description>
```

### 本文

- `.github/pull_request_template.md` に記載されている内容をテンプレートして使用してください。
- テンプレート内の各セクションに適切な内容を記載してください。
- 変更内容が多い場合は、重要なポイントに絞って説明してください。
- 説明は日本語で作成し、クラス名やメソッド名などの固有名詞は英語のまま使用してください。
