---
mode: 'agent'
description: 'プルリクエストを作成する'
---

# プルリクエスト作成エージェント

現在のブランチをPushし、 `main` ブランチへマージするプルリクエストを作成してください。

## 手順

下記の手順に従ってください。

### 1. 現在のブランチを取得

- ブランチ名を取得します。

**注意**

- ブランチ名が `main` の場合、プルリクエストを作成しないでください。
  - その場合は「mainブランチではプルリクエストを作成できません」と返答してください。

### 2. ブランチをPush

- 現在のブランチがリモートにPushされていない場合、`git push origin <branch-name>` コマンドを使用してPushします。

### 3. マージ先との差分を取得

- mainブランチとの差分（コミット履歴・変更ファイル・diff）を取得ください
  - 現在のブランチからmainブランチへマージするプルリクエストを作成するため

### 4. プルリクエストのタイトルと説明を生成

- マージ先との差分を要約し、プルリクエストのタイトルと説明を生成します。
- フォーマットは、プルリクエストのフォーマットセクションを参照してください。

### 5. プルリクエストを作成

- mainブランチへマージするためのプルリクエストを作成します。
- タイトル・説明は前のステップで生成したものを使用してください。
- プルリクエストの作成は、gh CLIを使用してください。

### 6. 結果を返答

- プルリクエストのURLを含む成功メッセージを返答します。
- もしエラーが発生した場合は、エラーメッセージを返答します。

## プルリクエストのフォーマット

### タイトル

- タイトルは以下のフォーマットに従ってください。
- type, scope は、`.github/instructions/commit-message.instructions.md` に記載されているものを使用してください。
- short description は、変更内容を簡潔に表現してください。
- タイトルは50文字以内で日本語で作成し、クラス名やメソッド名などの固有名詞は英語のまま使用してください。

```
<type>(<scope>): <short description>
```

### 説明

- `.github/pull-request-template.md` に記載されているテンプレートを使用してください。
- テンプレート内の各セクションに適切な内容を記載してください。
- 変更内容が多い場合は、重要なポイントに絞って説明してください。
- 説明は日本語で作成し、クラス名やメソッド名などの固有名詞は英語のまま使用してください。